<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErrandService 테스트 페이지</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1, h2 { color: #333; }
        .section { margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; }
        button { margin: 5px; padding: 5px 10px; }
        input, textarea { margin: 5px 0; padding: 5px; width: 300px; }
        #results { background-color: #f0f0f0; padding: 10px; margin-top: 20px; white-space: pre-wrap; }
    </style>
</head>
<body>
<h1>ErrandService 테스트 페이지</h1>

<div class="section">
    <h2>Category 테스트</h2>
    <button onclick="createCategory()">카테고리 생성</button>
    <button onclick="getAllCategories()">모든 카테고리 조회</button>
    <button onclick="getCategoryById()">특정 카테고리 조회</button>
    <button onclick="updateCategory()">카테고리 수정</button>
    <button onclick="deleteCategory()">카테고리 삭제</button>
    <button onclick="getCategoryTree()">카테고리 트리 조회</button>
    <br>
    <input id="categoryId" type="number" placeholder="카테고리 ID">
    <input id="categoryName" type="text" placeholder="카테고리 이름">
    <input id="categoryDescription" type="text" placeholder="카테고리 설명">
</div>

<div class="section">
    <h2>ServiceOffering 테스트</h2>
    <button onclick="createServiceOffering()">서비스 제공 정보 생성</button>
    <button onclick="getAllServiceOfferings()">모든 서비스 제공 정보 조회</button>
    <button onclick="getServiceOfferingById()">특정 서비스 제공 정보 조회</button>
    <button onclick="updateServiceOffering()">서비스 제공 정보 수정</button>
    <button onclick="deleteServiceOffering()">서비스 제공 정보 삭제</button>
    <button onclick="getServiceOfferingsByCategory()">카테고리별 서비스 제공 정보 조회</button>
    <br>
    <input id="serviceOfferingId" type="number" placeholder="서비스 제공 ID">
    <input id="serviceOfferingTitle" type="text" placeholder="제목">
    <input id="serviceOfferingDescription" type="text" placeholder="설명">
    <input id="serviceOfferingPrice" type="number" placeholder="가격">
    <input id="serviceOfferingLocation" type="text" placeholder="위치">
    <input id="serviceOfferingCategoryId" type="number" placeholder="카테고리 ID">
    <input id="serviceOfferingProviderId" type="number" placeholder="제공자 ID">
</div>

<div class="section">
    <h2>Errand 테스트</h2>
    <button onclick="createErrand()">심부름 생성</button>
    <button onclick="getAllErrands()">모든 심부름 조회</button>
    <button onclick="getErrandById()">특정 심부름 조회</button>
    <button onclick="updateErrand()">심부름 수정</button>
    <button onclick="deleteErrand()">심부름 삭제</button>
    <button onclick="getErrandsByCategory()">카테고리별 심부름 조회</button>
    <br>
    <input id="errandId" type="number" placeholder="심부름 ID">
    <input id="errandTitle" type="text" placeholder="제목">
    <input id="errandDescription" type="text" placeholder="설명">
    <input id="errandRequesterSeq" type="number" placeholder="요청자 ID">
    <input id="errandRunnerSeq" type="number" placeholder="실행자 ID">
    <input id="errandStatus" type="text" placeholder="상태">
    <input id="errandCategoryId" type="number" placeholder="카테고리 ID">
</div>

<div id="results"></div>

<script>
    const BASE_URL = 'http://localhost:8090/api';

    async function sendRequest(url, method, body = null) {
        const options = {
            method: method,
            headers: {
                'Content-Type': 'application/json',
            },
        };
        if (body) options.body = JSON.stringify(body);

        try {
            const response = await fetch(BASE_URL + url, options);
            const data = await response.json();
            document.getElementById('results').textContent = JSON.stringify(data, null, 2);
            return data;
        } catch (error) {
            document.getElementById('results').textContent = 'Error: ' + error.message;
        }
    }

    // Category functions
    function createCategory() {
        const name = document.getElementById('categoryName').value;
        const description = document.getElementById('categoryDescription').value;
        sendRequest('/categories', 'POST', { name, description });
    }

    function getAllCategories() {
        sendRequest('/categories', 'GET');
    }

    function getCategoryById() {
        const id = document.getElementById('categoryId').value;
        sendRequest(`/categories/${id}`, 'GET');
    }

    function updateCategory() {
        const id = document.getElementById('categoryId').value;
        const name = document.getElementById('categoryName').value;
        const description = document.getElementById('categoryDescription').value;
        sendRequest(`/categories/${id}`, 'PUT', { name, description });
    }

    function deleteCategory() {
        const id = document.getElementById('categoryId').value;
        sendRequest(`/categories/${id}`, 'DELETE');
    }

    function getCategoryTree() {
        sendRequest('/categories/tree', 'GET');
    }

    // ServiceOffering functions
    function createServiceOffering() {
        const title = document.getElementById('serviceOfferingTitle').value;
        const description = document.getElementById('serviceOfferingDescription').value;
        const priceRange = Number(document.getElementById('serviceOfferingPrice').value);
        const location = document.getElementById('serviceOfferingLocation').value;
        const categoryId = Number(document.getElementById('serviceOfferingCategoryId').value);
        const providerId = Number(document.getElementById('serviceOfferingProviderId').value);
        sendRequest('/service-offerings', 'POST', { title, description, priceRange, location, categoryId, providerId });
    }

    function getAllServiceOfferings() {
        sendRequest('/service-offerings', 'GET');
    }

    function getServiceOfferingById() {
        const id = document.getElementById('serviceOfferingId').value;
        sendRequest(`/service-offerings/${id}`, 'GET');
    }

    function updateServiceOffering() {
        const id = document.getElementById('serviceOfferingId').value;
        const title = document.getElementById('serviceOfferingTitle').value;
        const description = document.getElementById('serviceOfferingDescription').value;
        const priceRange = Number(document.getElementById('serviceOfferingPrice').value);
        const location = document.getElementById('serviceOfferingLocation').value;
        const categoryId = Number(document.getElementById('serviceOfferingCategoryId').value);
        const providerId = Number(document.getElementById('serviceOfferingProviderId').value);
        sendRequest(`/service-offerings/${id}`, 'PUT', { title, description, priceRange, location, categoryId, providerId });
    }

    function deleteServiceOffering() {
        const id = document.getElementById('serviceOfferingId').value;
        sendRequest(`/service-offerings/${id}`, 'DELETE');
    }

    function getServiceOfferingsByCategory() {
        const categoryId = document.getElementById('serviceOfferingCategoryId').value;
        sendRequest(`/service-offerings/category/${categoryId}`, 'GET');
    }

    // Errand functions
    function createErrand() {
        const title = document.getElementById('errandTitle').value;
        const description = document.getElementById('errandDescription').value;
        const requesterSeq = Number(document.getElementById('errandRequesterSeq').value);
        const status = document.getElementById('errandStatus').value;
        const categoryId = Number(document.getElementById('errandCategoryId').value);
        sendRequest('/errands', 'POST', { title, description, requesterSeq, status, categoryId });
    }

    function getAllErrands() {
        sendRequest('/errands', 'GET');
    }

    function getErrandById() {
        const id = document.getElementById('errandId').value;
        sendRequest(`/errands/${id}`, 'GET');
    }

    function updateErrand() {
        const id = document.getElementById('errandId').value;
        const title = document.getElementById('errandTitle').value;
        const description = document.getElementById('errandDescription').value;
        const requesterSeq = Number(document.getElementById('errandRequesterSeq').value);
        const runnerSeq = Number(document.getElementById('errandRunnerSeq').value);
        const status = document.getElementById('errandStatus').value;
        const categoryId = Number(document.getElementById('errandCategoryId').value);
        sendRequest(`/errands/${id}`, 'PUT', { title, description, requesterSeq, runnerSeq, status, categoryId });
    }

    function deleteErrand() {
        const id = document.getElementById('errandId').value;
        sendRequest(`/errands/${id}`, 'DELETE');
    }

    function getErrandsByCategory() {
        const categoryId = document.getElementById('errandCategoryId').value;
        sendRequest(`/errands/category/${categoryId}`, 'GET');
    }
</script>
</body>
</html>