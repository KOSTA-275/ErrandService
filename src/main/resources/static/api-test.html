<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErrandService API Test</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f0f0f0; }
        .container { max-width: 800px; margin: 0 auto; background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1, h2 { color: #333; }
        .section { margin-bottom: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { margin: 5px; padding: 8px 15px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #45a049; }
        input, select { margin: 5px; padding: 8px; width: calc(100% - 16px); }
        #result { margin-top: 20px; border: 1px solid #ddd; padding: 10px; white-space: pre-wrap; background-color: #f9f9f9; }
    </style>
</head>
<body>
<div class="container">
    <h1>ErrandService API Test</h1>

    <div class="section">
        <h2>Categories</h2>
        <button onclick="getAllCategories()">Get All Categories</button>
        <button onclick="getCategoryTree()">Get Category Tree</button>
        <input id="categoryId" type="number" placeholder="Category ID">
        <button onclick="getCategoryById()">Get Category by ID</button>
        <input id="categoryName" type="text" placeholder="Category Name">
        <input id="categoryDescription" type="text" placeholder="Category Description">
        <input id="categoryParentId" type="number" placeholder="Parent Category ID">
        <input id="categoryImage" type="file" accept="image/*">
        <button onclick="createCategory()">Create Category</button>
        <button onclick="updateCategory()">Update Category</button>
        <button onclick="deleteCategory()">Delete Category</button>
    </div>

    <div class="section">
        <h2>Errands</h2>
        <button onclick="getAllErrands()">Get All Errands</button>
        <input id="errandId" type="number" placeholder="Errand ID">
        <button onclick="getErrandById()">Get Errand by ID</button>
        <input id="errandTitle" type="text" placeholder="Errand Title">
        <input id="errandDescription" type="text" placeholder="Errand Description">
        <input id="errandRequesterSeq" type="number" placeholder="Requester Sequence">
        <input id="errandRunnerSeq" type="number" placeholder="Runner Sequence">
        <input id="errandStatus" type="text" placeholder="Errand Status">
        <input id="errandCategoryId" type="number" placeholder="Category ID">
        <input id="errandImages" type="file" accept="image/*" multiple>
        <button onclick="createErrand()">Create Errand</button>
        <button onclick="updateErrand()">Update Errand</button>
        <button onclick="deleteErrand()">Delete Errand</button>
        <input id="errandCategoryIdFilter" type="number" placeholder="Category ID for filter">
        <button onclick="getErrandsByCategory()">Get Errands by Category</button>
    </div>

    <div class="section">
        <h2>Service Offerings</h2>
        <button onclick="getAllServiceOfferings()">Get All Service Offerings</button>
        <input id="serviceOfferingId" type="number" placeholder="Service Offering ID">
        <button onclick="getServiceOfferingById()">Get Service Offering by ID</button>
        <input id="serviceOfferingTitle" type="text" placeholder="Service Offering Title">
        <input id="serviceOfferingDescription" type="text" placeholder="Service Offering Description">
        <input id="serviceOfferingPriceRange" type="number" placeholder="Price Range">
        <input id="serviceOfferingLocation" type="text" placeholder="Location">
        <input id="serviceOfferingCategoryId" type="number" placeholder="Category ID">
        <input id="serviceOfferingProviderId" type="number" placeholder="Provider ID">
        <input id="serviceOfferingImages" type="file" accept="image/*" multiple>
        <button onclick="createServiceOffering()">Create Service Offering</button>
        <button onclick="updateServiceOffering()">Update Service Offering</button>
        <button onclick="deleteServiceOffering()">Delete Service Offering</button>
        <input id="serviceOfferingCategoryIdFilter" type="number" placeholder="Category ID for filter">
        <button onclick="getServiceOfferingsByCategory()">Get Service Offerings by Category</button>
    </div>

    <div id="result"></div>
</div>

<script>
    const BASE_URL = 'http://localhost:8090/errandservice';
    const resultDiv = document.getElementById('result');

    function showResult(data) {
        resultDiv.textContent = JSON.stringify(data, null, 2);
    }

    function handleError(error) {
        resultDiv.textContent = `Error: ${error.message}`;
        console.error('Error:', error);
    }

    async function getAllCategories() {
        try {
            const response = await axios.get(`${BASE_URL}/categories`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getCategoryTree() {
        try {
            const response = await axios.get(`${BASE_URL}/categories/tree`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getCategoryById() {
        const id = document.getElementById('categoryId').value;
        try {
            const response = await axios.get(`${BASE_URL}/categories/${id}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function createCategory() {
        const formData = new FormData();
        formData.append('name', document.getElementById('categoryName').value);
        formData.append('description', document.getElementById('categoryDescription').value);
        formData.append('parentCategoryId', document.getElementById('categoryParentId').value);
        formData.append('image', document.getElementById('categoryImage').files[0]);

        try {
            const response = await axios.post(`${BASE_URL}/categories`, formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function updateCategory() {
        const id = document.getElementById('categoryId').value;
        const formData = new FormData();
        formData.append('name', document.getElementById('categoryName').value);
        formData.append('description', document.getElementById('categoryDescription').value);
        formData.append('parentCategoryId', document.getElementById('categoryParentId').value);
        formData.append('image', document.getElementById('categoryImage').files[0]);

        try {
            const response = await axios.put(`${BASE_URL}/categories/${id}`, formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function deleteCategory() {
        const id = document.getElementById('categoryId').value;
        try {
            const response = await axios.delete(`${BASE_URL}/categories/${id}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getAllErrands() {
        try {
            const response = await axios.get(`${BASE_URL}/errands`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getErrandById() {
        const id = document.getElementById('errandId').value;
        try {
            const response = await axios.get(`${BASE_URL}/errands/${id}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function createErrand() {
        const formData = new FormData();
        formData.append('title', document.getElementById('errandTitle').value);
        formData.append('description', document.getElementById('errandDescription').value);
        formData.append('requesterSeq', document.getElementById('errandRequesterSeq').value);
        formData.append('runnerSeq', document.getElementById('errandRunnerSeq').value);
        formData.append('status', document.getElementById('errandStatus').value);
        formData.append('categoryId', document.getElementById('errandCategoryId').value);
        const images = document.getElementById('errandImages').files;
        for (let i = 0; i < images.length; i++) {
            formData.append('images', images[i]);
        }

        try {
            const response = await axios.post(`${BASE_URL}/errands`, formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function updateErrand() {
        const id = document.getElementById('errandId').value;
        const formData = new FormData();
        formData.append('title', document.getElementById('errandTitle').value);
        formData.append('description', document.getElementById('errandDescription').value);
        formData.append('requesterSeq', document.getElementById('errandRequesterSeq').value);
        formData.append('runnerSeq', document.getElementById('errandRunnerSeq').value);
        formData.append('status', document.getElementById('errandStatus').value);
        formData.append('categoryId', document.getElementById('errandCategoryId').value);
        const images = document.getElementById('errandImages').files;
        for (let i = 0; i < images.length; i++) {
            formData.append('images', images[i]);
        }

        try {
            const response = await axios.put(`${BASE_URL}/errands/${id}`, formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function deleteErrand() {
        const id = document.getElementById('errandId').value;
        try {
            const response = await axios.delete(`${BASE_URL}/errands/${id}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getErrandsByCategory() {
        const categoryId = document.getElementById('errandCategoryIdFilter').value;
        try {
            const response = await axios.get(`${BASE_URL}/errands/category/${categoryId}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getAllServiceOfferings() {
        try {
            const response = await axios.get(`${BASE_URL}/service-offerings`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getServiceOfferingById() {
        const id = document.getElementById('serviceOfferingId').value;
        try {
            const response = await axios.get(`${BASE_URL}/service-offerings/${id}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function createServiceOffering() {
        const formData = new FormData();
        formData.append('title', document.getElementById('serviceOfferingTitle').value);
        formData.append('description', document.getElementById('serviceOfferingDescription').value);
        formData.append('priceRange', document.getElementById('serviceOfferingPriceRange').value);
        formData.append('location', document.getElementById('serviceOfferingLocation').value);
        formData.append('categoryId', document.getElementById('serviceOfferingCategoryId').value);
        formData.append('providerId', document.getElementById('serviceOfferingProviderId').value);
        const images = document.getElementById('serviceOfferingImages').files;
        for (let i = 0; i < images.length; i++) {
            formData.append('images', images[i]);
        }

        try {
            const response = await axios.post(`${BASE_URL}/service-offerings`, formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function updateServiceOffering() {
        const id = document.getElementById('serviceOfferingId').value;
        const formData = new FormData();
        formData.append('title', document.getElementById('serviceOfferingTitle').value);
        formData.append('description', document.getElementById('serviceOfferingDescription').value);
        formData.append('priceRange', document.getElementById('serviceOfferingPriceRange').value);
        formData.append('location', document.getElementById('serviceOfferingLocation').value);
        formData.append('categoryId', document.getElementById('serviceOfferingCategoryId').value);
        formData.append('providerId', document.getElementById('serviceOfferingProviderId').value);
        const images = document.getElementById('serviceOfferingImages').files;
        for (let i = 0; i < images.length; i++) {
            formData.append('images', images[i]);
        }

        try {
            const response = await axios.put(`${BASE_URL}/service-offerings/${id}`, formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function deleteServiceOffering() {
        const id = document.getElementById('serviceOfferingId').value;
        try {
            const response = await axios.delete(`${BASE_URL}/service-offerings/${id}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }

    async function getServiceOfferingsByCategory() {
        const categoryId = document.getElementById('serviceOfferingCategoryIdFilter').value;
        try {
            const response = await axios.get(`${BASE_URL}/service-offerings/category/${categoryId}`);
            showResult(response.data);
        } catch (error) {
            handleError(error);
        }
    }
</script>
</body>
</html>